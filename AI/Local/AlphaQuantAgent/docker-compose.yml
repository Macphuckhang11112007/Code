version: '3.8'

services:
  # üß† 1. AGENT CORE (B·ªô n√£o x·ª≠ l√Ω ch√≠nh)
  alpha_core:
    build: .
    container_name: alpha_core
    volumes:
      - ./app:/app
    env_file:
      - .env
    ports:
      - "8000:8000"  # ƒê·ªÉ xem API ho·∫∑c Dashboard Streamlit
    stdin_open: true # Cho ph√©p t∆∞∆°ng t√°c terminal
    tty: true
    networks:
      - alpha_net

  # üêò 2. DATABASE (L∆∞u gi√° ch·ª©ng kho√°n/Crypto)
  postgres:
    image: postgres:15-alpine
    container_name: alpha_db
    environment:
      POSTGRES_USER: ${DB_USER}
      POSTGRES_PASSWORD: ${DB_PASS}
      POSTGRES_DB: ${DB_NAME}
    ports:
      - "5432:5432"
    networks:
      - alpha_net

  # üìö 3. VECTOR DB (ƒê·ªÉ Agent tra c·ª©u t√†i li·ªáu/tin t·ª©c - RAG)
  chromadb:
    image: chromadb/chroma:latest
    container_name: alpha_vector
    ports:
      - "8001:8000"
    networks:
      - alpha_net

networks:
  alpha_net:
    driver: bridge
